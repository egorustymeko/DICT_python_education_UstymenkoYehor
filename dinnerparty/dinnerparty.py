import random

# Крок 1: Додати друзів
# Створення словника для зберігання друзів та їхніх сум
def step_1():
    """
    Ця функція збирає імена друзів, які приєднаються до вечірки,
    та ініціалізує словник, де імена виступають як ключі,
    а їхні внески (встановлені в 0) — як значення.
    Функція запитує у користувача кількість друзів і їхні імена.

    Повертає:
        dict: Словник, у якому імена друзів — ключі, а початкові внески — 0.
              Якщо жоден із друзів не приєднується, повертається порожній словник.
    """
    friends = {}

    num_friends = int(input("Введіть кількість друзів, які приєднаються (включаючи вас):\n"))

    if num_friends <= 0:
        print("Ніхто не приєднується до вечірки")
        return friends

    print("Введіть ім'я кожного друга (включаючи вас), кожне з нового рядка:")
    for _ in range(num_friends):
        name = input("\n")
        friends[name] = 0

    print(friends)
    return friends

# Крок 2: Поділити рахунок
def step_2(friends):
    """
    Ця функція ділить загальну суму рахунку між усіма друзями,
    які беруть участь у вечірці. Якщо список друзів порожній,
    функція повідомляє, що ніхто не приєднується.

    Параметри:
        friends (dict): Словник, у якому імена друзів є ключами,
                        а значенням — їхні початкові внески.

    Повертає:
        dict: Оновлений словник, у якому кожному другу призначається
              рівна частина загальної суми. Якщо список порожній,
              повертається незмінений словник.
    """
    if not friends:
        print("Ніхто не приєднується до вечірки")
        return friends

    total_amount = float(input("Введіть загальну суму:\n"))
    split_amount = round(total_amount / len(friends), 2)

    for friend in friends:
        friends[friend] = split_amount

    print(friends)
    return friends

# Крок 3: Вибрати щасливчика
def step_3(friends):
    """
    Ця функція дозволяє визначити "щасливчика", який не бере участі у сплаті рахунку.
    Якщо список друзів порожній, функція повідомляє про це.
    Користувач може вирішити, чи використовувати функцію вибору щасливчика.

    Параметри:
        friends (dict): Словник, у якому імена друзів є ключами.

    Повертає:
        str: Ім'я щасливчика, якщо функція активована.
        None: Якщо функція не використовується або список друзів порожній.
    """
    import random

    if not friends:
        print("Ніхто не приєднується до вечірки")
        return friends

    use_lucky = input("Хочете скористатися функцією \"Хто щасливчик?\" Напишіть Так/Ні:\n")

    if use_lucky.lower() == "так":
        lucky_one = random.choice(list(friends.keys()))
        print(f"{lucky_one} — щасливчик!")
        return lucky_one
    else:
        print("Ніхто не буде щасливчиком")
        return None

# Крок 4: Перерахувати суми, якщо є щасливчик
def step_4(friends, lucky_one):
    """
    Ця функція перераховує суми внесків, якщо є "щасливчик",
    який не бере участі у сплаті рахунку. Якщо список друзів порожній,
    функція повідомляє про це. У випадку наявності щасливчика,
    його внесок встановлюється в 0, а сума ділиться між іншими.

    Параметри:
        friends (dict): Словник, у якому імена друзів є ключами,
                        а значенням — їхні внески.
        lucky_one (str): Ім'я "щасливчика", якщо є, або None.

    Повертає:
        dict: Оновлений словник із перерахованими внесками.
    """
    if not friends:
        print("Ніхто не приєднується до вечірки")
        return friends

    if lucky_one:
        total_amount = sum(friends.values()) * len(friends) / (len(friends) - 1)
        split_amount = round(total_amount / (len(friends) - 1), 2)

        for friend in friends:
            if friend != lucky_one:
                friends[friend] = split_amount
            else:
                friends[friend] = 0

    print(friends)
    return friends

# Основний алгоритм
def main():
    """
    Основна функція, яка координує виконання програми.
    Викликає функції для додавання друзів, розподілу рахунку,
    визначення "щасливчика" (за бажанням користувача)
    та перерахунку сум у разі наявності щасливчика.
    """
    friends = step_1()
    if friends:
        friends = step_2(friends)
        lucky_one = step_3(friends)
        friends = step_4(friends, lucky_one)

if __name__ == "__main__":
    main()